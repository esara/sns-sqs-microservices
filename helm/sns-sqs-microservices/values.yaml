# Default values for sns-sqs-microservices
# This is a YAML-formatted file.

# Global settings
global:
  aws:
    region: us-east-2
    accountId: "040365544943"

# Image registry configuration
imageRegistry: docker.io
imagePullPolicy: Always

# Producer service configuration
producer:
  enabled: true
  image:
    repository: esara/sns-sqs-producer
    tag: latest
    pullPolicy: Always
  
  serviceAccount:
    create: true
    name: producer-service-account
    annotations:
      # Replace with your IAM role ARN
      eks.amazonaws.com/role-arn: "arn:aws:iam::040365544943:role/sns-sqs-producer-role"
  
  deployment:
    replicas: 1
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "500m"
  
  # Deploy as Job instead of Deployment
  job:
    enabled: false
    backoffLimit: 3

# Order Processing service configuration
orderProcessing:
  enabled: true
  image:
    repository: esara/sns-sqs-order-processing
    tag: latest
    pullPolicy: Always
  
  serviceAccount:
    create: true
    name: order-processing-service-account
    annotations:
      # Replace with your IAM role ARN
      eks.amazonaws.com/role-arn: "arn:aws:iam::040365544943:role/sns-sqs-order-processing-role"
  
  deployment:
    replicas: 2
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "500m"
  
  # Health checks
  probes:
    liveness:
      enabled: true
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readiness:
      enabled: true
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  
  # Horizontal Pod Autoscaler
  hpa:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80
  
  # Pod Disruption Budget
  pdb:
    enabled: false
    minAvailable: 1

# Notification service configuration
notification:
  enabled: true
  image:
    repository: esara/sns-sqs-notification
    tag: latest
    pullPolicy: Always
  
  serviceAccount:
    create: true
    name: notification-service-account
    annotations:
      # Replace with your IAM role ARN
      eks.amazonaws.com/role-arn: "arn:aws:iam::040365544943:role/sns-sqs-notification-role"
  
  deployment:
    replicas: 2
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "500m"
  
  # Health checks
  probes:
    liveness:
      enabled: true
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readiness:
      enabled: true
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  
  # Horizontal Pod Autoscaler
  hpa:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80
  
  # Pod Disruption Budget
  pdb:
    enabled: false
    minAvailable: 1

# AWS SNS/SQS Configuration
aws:
  sns:
    topicArn: "arn:aws:sns:us-east-2:040365544943:orders-topic"
  
  sqs:
    orderProcessingQueueUrl: "https://sqs.us-east-2.amazonaws.com/040365544943/order-processing-queue"
    notificationQueueUrl: "https://sqs.us-east-2.amazonaws.com/040365544943/notification-queue"

# OpenTelemetry configuration
otlp:
  enabled: false
  endpoint: "http://opentelemetry-collector:4318"
  insecure: "true"
  # headers: "key1=value1,key2=value2"

# Labels and annotations
# Only include these if you want to add labels/selectors
# labels:
#   app.kubernetes.io/name: sns-sqs-microservices
#   app.kubernetes.io/instance: sns-sqs-microservices
# selectorLabels:
#   app.kubernetes.io/name: sns-sqs-microservices
#   app.kubernetes.io/instance: sns-sqs-microservices

